<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <title>POC > Accueil</title>
  <meta name="description" content=""/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png"/>
  <link rel="icon" href="favicon.ico" sizes="16x16" type="image/vnd.microsoft.icon">
  <link rel="stylesheet" type="text/css" href="styles/styles.css"/>
  <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
  <script src="bower_components/page/page.js"></script>
  <link rel="import" href="elements/elements.html">
</head>
<body unresolved class="page-home w100 flexbox-v">
<template is="dom-bind" id="app">
  <div class="header-container">
    <header id="header" class="wrapper clearfix txtcenter">
      <h1 class="title"><img src="images/logo-header.png" alt="silverpeas"/></h1>
      <sp-connection-info login-page='/login.html' user="{{currentUser}}"></sp-connection-info>
      <nav>
          <ul>
            <li class="selected"><a href="/home.html">Home sweet home</a></li>
          </ul>
      </nav>
    </header>
  </div>
  <div class="main-container flexitem-fluid">
  <div class="main wrapper clearfix">
    <iron-pages attr-for-selected="data-route" selected="{{route}}">
      <page-material data-route="home" elevation="1">
        <sp-home-page></sp-home-page>
      </page-material>
    </iron-pages>
  </div>
  <!-- #main -->
</div>
<!-- #main-container -->
<div class="footer-container pam">
  <footer class="wrapper"> 2015 Silverpeas Represente ! Tac tac</footer>
</div>
</template>
<script>
  (function(document) {
    'use strict';

    window.addEventListener('WebComponentsReady', function() {
      var app = document.querySelector('#app');

      // apply dynamically some style classes
      (function() {
        var header = document.getElementById("header");

        function scrolled() {
          var windowHeight = document.body.clientHeight, currentScroll = document.body.scrollTop ||
              document.documentElement.scrollTop;

          document.getElementById("header").className =
              (currentScroll >= 273) ? "wrapper clearfix txtcenter fixed" :
                  "wrapper clearfix txtcenter";
        }

        addEventListener("scroll", scrolled, false);
      })();

      // load routing rules.
      (function() {

        page('/', function() {
          console.log("home root asked");
          app.route = 'home';
        });

        page('/index.html', function() {
          console.log("home root asked");
          app.route = 'home';
        });

        page('/home.html', function() {
          console.log("home root asked");
          app.route = 'home';
        });

        page('/spaces/:id', function(data) {
          console.log("space selected: " + data.params.id);
          console.log('previous route: ' + app.route);
          app.params = data.params;
          app.route = 'space-info'
        });

        // add #! before urls
        page({
          hashbang : false
        });

        console.log("routing loaded!");
      })();

      document.querySelector('body').removeAttribute('unresolved');
    });
  })(document);
</script>
</body>
</html>
